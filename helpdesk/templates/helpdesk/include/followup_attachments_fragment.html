{% load i18n %}
{% if helpdesk_settings.HELPDESK_ENABLE_ATTACHMENTS %}
<div class="mt-3 followup-attachments-fragment">
  <label class="font-weight-600">{% trans "Attachments (this follow-up)" %}</label>
  <div class="existing-attachments mb-2">
    {% for attachment in followup.followupattachment_set.all %}
      <div class="d-flex align-items-center mb-1 justify-content-between">
        <div>
          <a href="{{ attachment.file.url }}">{{ attachment.filename }}</a>
          <small class="text-muted">({{ attachment.mime_type }}, {{ attachment.size|filesizeformat }})</small>
        </div>
        <div class="d-flex align-items-center">
          <button type="button" class="edit-attachment-btn btn btn-sm ml-2" data-attachment-id="{{ attachment.id }}" aria-label="{% trans 'Edit attachment' %}" style="background:#ffd84d;border:none;color:#1f1f1f;border-radius:6px;padding:6px 8px;">
            <i class="fas fa-pencil-alt"></i>
          </button>
          {% if user.is_staff or user.is_superuser %}
          <button type="button" class="delete-attachment-btn btn btn-sm btn-danger ml-2" data-delete-url="{% url 'helpdesk:attachment_del' ticket.id attachment.id %}" aria-label="{% trans 'Delete attachment' %}">
            <i class="fas fa-trash"></i>
          </button>
          {% endif %}
        </div>
      </div>
    {% empty %}
      <div class="text-muted">{% trans "No attachments" %}</div>
    {% endfor %}
  </div>
</div>
{% endif %}
