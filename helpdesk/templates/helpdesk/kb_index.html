{% extends "helpdesk/base.html" %}{% load i18n %}


{% block helpdesk_title %}{% trans "Knowledgebase" %}{% endblock %}

{% block helpdesk_breadcrumb %}
<li class="breadcrumb-item">
    <a href="{% url 'helpdesk:kb_index' %}">{% trans "Knowledgebase" %}</a>
</li>
{% if user.is_staff %}
<li class="breadcrumb-item active">{% trans "Overview" %}</li>
{% endif %}
{% endblock %}

{% block helpdesk_body %}
<h2>{% trans "Knowledgebase" %}</h2>

<div style="display:flex;flex-direction:column;gap:8px;">
    <p style="flex:1;min-width:220px">{% trans "We have listed a number of Knowledgebase articles for your perusal in the following categories. Please check to see if any of these articles address your problem prior to opening a support ticket." %}</p>
    {% if user.is_superuser %}
        <div style="margin-top:4px;">
            <a class="btn btn-success mr-2" href="{% url 'helpdesk:kb_category_add' %}">{% trans 'Add Category' %}</a>
            <a class="btn btn-success" href="{% url 'helpdesk:kb_add' %}">{% trans 'Add Item' %}</a>
        </div>
    {% endif %}
</div>

{% for category in kb_categories %}
<div class="card mb-3">
    <div class="card-header">
        <h5 class="mb-0">{{ category.title }}</h5>
    </div>
    <div class="card-body">
        {% if category.description %}
            <p class="card-text mb-0 font-weight-normal">{{ category.description|linebreaksbr }}</p>
        {% endif %}
        <p class="card-text">
            <small class="text-muted">
                <a class="btn btn-primary" href="{{ category.get_absolute_url }}">{% trans 'View items' %} <i class="fa fa-share"></i></a>
            </small>
        </p>
    </div>
</div>
{% endfor %}

{% endblock %}
